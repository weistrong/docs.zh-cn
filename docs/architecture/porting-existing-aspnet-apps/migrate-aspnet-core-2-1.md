---
title: 迁移到 ASP.NET Core 2.1
description: 作为支持 .NET Framework 运行时目标的最新 .NET Core 版本，迁移到 .NET Core 2.1 对于某些应用迁移计划而言是一个中间步骤吗？
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: 0c478ae194c6d9118bfbca73f8933d7623246e2c
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/04/2021
ms.locfileid: "102401070"
---
# <a name="migrate-to-aspnet-core-21"></a><span data-ttu-id="8d57e-103">迁移到 ASP.NET Core 2.1</span><span class="sxs-lookup"><span data-stu-id="8d57e-103">Migrate to ASP.NET Core 2.1</span></span>

<span data-ttu-id="8d57e-104">ASP.NET Core 2.1 是一个有趣的版本，因为它是唯一支持 .NET Core 和 .NET Framework 运行时的唯一受支持的 .NET Core 版本。</span><span class="sxs-lookup"><span data-stu-id="8d57e-104">ASP.NET Core 2.1 is an interesting release because it's the only currently supported .NET Core release to support both .NET Core and .NET Framework runtimes.</span></span> <span data-ttu-id="8d57e-105">同样，与将应用程序的所有部分升级到 .NET Core 相比，它可以为某些应用提供更简单的升级途径。</span><span class="sxs-lookup"><span data-stu-id="8d57e-105">As such, it may offer an easier upgrade path for some apps when compared to upgrading all parts of the app to .NET Core at once.</span></span> <span data-ttu-id="8d57e-106">作为 LTS 版本，对 .NET Core 2.1 的支持将持续到8月2021。</span><span class="sxs-lookup"><span data-stu-id="8d57e-106">As an LTS release, support for .NET Core 2.1 will continue through August 2021.</span></span> <span data-ttu-id="8d57e-107">对于在 .NET Framework 上运行的 ASP.NET Core 2.1 的支持，只要支持其基础 .NET Framework，就会继续。</span><span class="sxs-lookup"><span data-stu-id="8d57e-107">Support for ASP.NET Core 2.1 running on .NET Framework will continue for as long as its underlying .NET Framework is supported.</span></span>

## <a name="should-apps-run-on-net-framework-with-aspnet-core-21"></a><span data-ttu-id="8d57e-108">应用是否应在 ASP.NET Core 2.1 的 .NET Framework 上运行</span><span class="sxs-lookup"><span data-stu-id="8d57e-108">Should apps run on .NET Framework with ASP.NET Core 2.1</span></span>

<span data-ttu-id="8d57e-109">ASP.NET Core 2.2 及更早版本支持 .NET Core 和 .NET Framework 运行时。</span><span class="sxs-lookup"><span data-stu-id="8d57e-109">ASP.NET Core 2.2 and earlier supported both .NET Core and .NET Framework runtimes.</span></span> <span data-ttu-id="8d57e-110">在完全移植到 .NET Core 之前，将部分或全部应用程序迁移到 ASP.NET Core 2.1 作为步进石是有意义的吗？</span><span class="sxs-lookup"><span data-stu-id="8d57e-110">Does it make sense to migrate some or all of an app to ASP.NET Core 2.1 as a stepping stone, before porting over completely to .NET Core?</span></span> <span data-ttu-id="8d57e-111">应用程序或应用程序的子集可以看到其前端 ASP.NET 逻辑 .NET Framework 使用 ASP.NET Core，同时仍然使用库来实现业务逻辑和基础结构使用。</span><span class="sxs-lookup"><span data-stu-id="8d57e-111">Apps, or subsets of apps, could see their front-end ASP.NET logic ported to use ASP.NET Core, while still consuming .NET Framework libraries for business logic and infrastructure consumption.</span></span> <span data-ttu-id="8d57e-112">此方法在以下情况下可能非常有用：有一个相对较薄的 UI 层没有多个业务逻辑，而类库中有一组更大的功能。</span><span class="sxs-lookup"><span data-stu-id="8d57e-112">This approach may make sense when there's a relatively thin UI layer without much business logic, and a much larger set of functionality in class libraries.</span></span>

<span data-ttu-id="8d57e-113">仅将前端 web 层移植到 ASP.NET Core 2.1 的主要优点是，在初始迁移期间，现有的 .NET 类库可以保持原样。</span><span class="sxs-lookup"><span data-stu-id="8d57e-113">The main benefit of porting just the front-end web layer to ASP.NET Core 2.1 is that the existing .NET class libraries can remain as is during the initial migration.</span></span> <span data-ttu-id="8d57e-114">它们可能是其他 .NET 应用程序继续使用的，或者不需要在计划的完整迁移到 .NET Core 的第一次迭代范围内。</span><span class="sxs-lookup"><span data-stu-id="8d57e-114">They may be in continued use by other .NET apps or simply don't need to be in scope for the first iteration of a planned full migration to .NET Core.</span></span> <span data-ttu-id="8d57e-115">减小大型应用的初始迁移范围有助于提供以步进方式进入所需结束状态的增量目标，这通常是 .NET Core 的完整端口。</span><span class="sxs-lookup"><span data-stu-id="8d57e-115">Reducing the scope of the initial migration for large apps helps provide incremental goals that act as stepping stones toward the desired end state, which is often a complete port to .NET Core.</span></span>

<span data-ttu-id="8d57e-116">如果你有一个可能使用此策略的现有应用程序，你现在可以执行的一些操作是将业务逻辑、数据访问和其他非 UI 逻辑从 ASP.NET 项目移出，并将其移到单独的类库中。</span><span class="sxs-lookup"><span data-stu-id="8d57e-116">If you have an existing app that may use this strategy, some things you can do today to help prepare for the process are to move as much business logic, data access, and other non-UI logic out of the ASP.NET projects and into separate class libraries as possible.</span></span> <span data-ttu-id="8d57e-117">如果你对系统进行了自动测试，使你能够在迁移之前和之后验证行为是否保持一致，此方法也会有所帮助。</span><span class="sxs-lookup"><span data-stu-id="8d57e-117">It will also help if you have automated test coverage of your system, so that you can verify behavior remains consistent before and after the migration.</span></span>

<span data-ttu-id="8d57e-118">如果你的应用程序太大，无法同时迁移整个 web 应用，并且你需要能够将新的 ASP.NET Core 应用程序并行部署到现有的 ASP.NET 应用程序中，则可以使用部署策略来实现此目的。</span><span class="sxs-lookup"><span data-stu-id="8d57e-118">If your app is so large that you can't migrate the entire web app at once, and you need to be able to deploy the new ASP.NET Core app side-by-side with the existing ASP.NET app, there are deployment strategies that can be used to achieve this.</span></span> <span data-ttu-id="8d57e-119">[第5章：部署方案](deployment-scenarios.md)中对这些内容进行了介绍。</span><span class="sxs-lookup"><span data-stu-id="8d57e-119">These are covered in [Chapter 5: Deployment Scenarios](deployment-scenarios.md).</span></span>

<span data-ttu-id="8d57e-120">请记住，ASP.NET Core 2.1 是 .NET Core 的最后一个 LTS 版本，它支持在 .NET Framework 和使用 .NET Framework 库上运行。</span><span class="sxs-lookup"><span data-stu-id="8d57e-120">Keep in mind that ASP.NET Core 2.1 is the last LTS release of .NET Core that supports running on .NET Framework and consuming .NET Framework libraries.</span></span> <span data-ttu-id="8d57e-121">此版本不久将会受支持，但只要 .NET Framework (，即使在 .NET Core 2.1 支持) 结束后 ASP.NET Core 2.1 .NET Framework 也将受支持。</span><span class="sxs-lookup"><span data-stu-id="8d57e-121">This release will soon be unsupported, but ASP.NET Core 2.1 on .NET Framework will be supported as long as the .NET Framework (even after .NET Core 2.1 support ends).</span></span> <span data-ttu-id="8d57e-122">有关详细信息，请参阅 [.NET Framework 上的 ASP.NET Core 2.1](https://dotnet.microsoft.com/platform/support/policy/dotnet-core)。</span><span class="sxs-lookup"><span data-stu-id="8d57e-122">For more information, see [ASP.NET Core 2.1 on .NET Framework](https://dotnet.microsoft.com/platform/support/policy/dotnet-core).</span></span>

## <a name="references"></a><span data-ttu-id="8d57e-123">参考</span><span class="sxs-lookup"><span data-stu-id="8d57e-123">References</span></span>

[<span data-ttu-id="8d57e-124">从 ASP.NET 迁移到 ASP.NET Core 2。1</span><span class="sxs-lookup"><span data-stu-id="8d57e-124">Migrating from ASP.NET to ASP.NET Core 2.1</span></span>](/aspnet/core/migration/proper-to-2x/?preserve-view=true&view=aspnetcore-2.1)

>[!div class="step-by-step"]
><span data-ttu-id="8d57e-125">[上一页](migration-considerations.md)
>[下一页](choose-net-core-version.md)</span><span class="sxs-lookup"><span data-stu-id="8d57e-125">[Previous](migration-considerations.md)
[Next](choose-net-core-version.md)</span></span>
